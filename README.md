# 113-1 資料庫管理 - TicketVibe

## 專案簡介

不想錯過心儀的演唱會？想找同好一起分享音樂的熱情？別擔心，立即上「TicketVibe」，搶先掌握最熱血的現場音樂體驗！

「TicketVibe」是一個專為音樂愛好者打造的票務平台，讓您隨時隨地探索最新的演唱會動態，迅速找到心儀的活動。平台上收錄了不同類型的現場演出資訊，無論是流行巨星的盛大演出，還是小眾樂團的專場，「TicketVibe」幫助您輕鬆接軌音樂世界，讓您不再錯過任何重要的音樂時刻！

「TicketVibe」的用戶可以分為兩種類型：一般使用者 (User) 和業務經營者 (Admin)。對於一般使用者來說，可以透過平台瀏覽最新的音樂活動，並隨時掌握票務的動態。作為業務經營者，Admin 則負責管理演出和票務的後台，確保所有活動資訊準確無誤，提升每一場活動的體驗。

:link: **[展示影片連結](https://youtu.be/6n-iG8npr9E)**

## 使用者功能

### User （一般使用者）

#### 使用者登入、註冊

- 註冊：使用者可以註冊帳號設定使用者身分證字號（userID）、名稱、密碼及電子郵件信箱。
- 登入：使用註冊的 userID 登入並驗證密碼。

#### 查詢目前演唱會

- 使用者可以透過此功能查詢尚未開始的演唱會。

#### 購買票券

- 使用者能透過此功能購買演唱會票券，選擇想要參與的演唱會後，在開賣時間可以購買票券，選擇座位區域和票券價錢後可以用不同方式（信用卡付款、ATM 虛擬帳號）付款。系統會生成訂單編號 (ticketID) 並紀錄使用者的付款時間、票券詳細資訊，包含價錢、座位 ID、票券類型（預售或公售票）、退款狀態及是否已經取票。

#### 取消票券訂單

- 使用者若想取消任一場演唱會的票券訂單，需要在該票券的最後退票日期前進行取消動作，唯須注意已經取票者不能夠取消訂單。

#### 查詢歷史訂單

- 使用者可以查詢自身曾經購買過的演唱會票券（包含已取消訂單者）。

### Admin （管理員／業務經營者）

#### 使用者登入、註冊

- 註冊：使用者可以註冊帳號設定使用者身分證字號（userID）、名稱、密碼及電子郵件信箱。
- 登入：使用註冊的 userID 登入並驗證密碼。
- 需注意是否為 Admin 需要直接進入 DBMS 中修改身份。

#### 管理功能

- 管理員可以新增 演唱會/主辦人/場地/表演者/座位價格。

#### 查詢任一使用者資訊

- 管理員可以查看任何使用者的資訊（包含使用者的票券購買紀錄）。

#### 查詢演唱會資訊

- 管理員可查詢所有演唱會的詳細資訊（包含時間已經過了的）。

## 使用方法

- 使用備份檔 `DB_Final.backup` 復原資料庫
- 預設連線通道為 **127.0.0.1:5000**，可至 `db.py` 修改
- 在 `db.py` 設定**資料庫名稱** (dbname)、**使用者名稱** (user)、**密碼**（password）、**主機位置** (host)及**通訊埠** (port)

先下載需要的套件，依照電腦的 python 版本選擇指令：

```bash
pip install -r requirements.txt
```

或

```bash
pip3 install -r requirements.txt
```

接著執行程式碼：

```bash
python app.py
```

或

```bash
python3 app.py
```

## 程式說明

1. **`./app.py`**
   - 包含伺服器端的主要功能。
   - 包含客戶端的主要功能。
   - 持續從伺服器接收訊息並顯示於終端機。
   - 封裝與資料庫相關的功能，包含資料庫連線管理與查詢操作。
2. **`./templates` 資料夾**
   - 所有網頁的頁面設計及控制。

## 開發環境

- macOS

- Python: 3.10.9

  - psycopg2: 2.9.10
  - flask: 1.1.2

- PostgreSQL: 17.2

## 參考資料

- README 說明文件及報告內容來自 **113-1資料庫管理**
